/* --- Palette & Variables --- /
:root {
--bg-dark: #1a1a1a; --bg-medium: #2c2c2c; --bg-light: #3f3f3f;
--text-light: #e0e0e0; --text-medium: #aaaaaa; --text-dark: #111111;
--border-color: #555555; --accent-color: #ffb74d; --gold-color: #ffd700;
--player-color: #4caf50; --enemy-color-base: #f44336; --enemy-color-alt1: #ff9800;
--enemy-color-alt2: #e91e63; --wall-color: #795548; --floor-color: #424242;
--exit-color: #2196F3; --potion-color: #00bcd4; --hp-color: #4caf50;
--mp-color: #2196F3; --xp-color: #ffc107; --modal-backdrop: rgba(0, 0, 0, 0.7);
/ Rarity Colors */
--rarity-common: #b0bec5;
--rarity-uncommon: #66bb6a;
--rarity-rare: #42a5f5;
--rarity-epic: #ab47bc;
--rarity-legendary: #ffa726;
}

/* --- Styles G√©n√©raux --- */
body {
font-family: Georgia, serif;
background-color: var(--bg-dark);
color: var(--text-light);
display: flex;
justify-content: center;
align-items: flex-start;
padding-top: 20px;
line-height: 1.5;
font-size: 16px;
}
#game-container {
display: flex;
flex-direction: column;
border: 2px solid var(--border-color);
padding: 15px;
background-color: var(--bg-medium);
min-width: 700px;
max-width: 900px;
box-shadow: 0 0 15px rgba(0,0,0,0.5);
}
h1, h2, h3 {
color: var(--accent-color);
margin-top: 0;
text-align: center;
}
h3 {
border-bottom: 1px solid var(--border-color);
padding-bottom: 5px;
margin-bottom: 10px;
color: var(--text-medium);
}

/* --- Layout Principal (Flexbox) --- /
#game-screen {
display: flex;
width: 100%;
margin-bottom: 15px;
min-height: 400px; / Ajustez si besoin selon taille grille/tuiles /
}
#main-view-area {
flex-grow: 1;
display: flex;
flex-direction: column;
margin-right: 15px;
}
#main-view {
flex-grow: 1;
border: 1px solid var(--border-color);
padding: 10px; / R√©duit pour potentiellement plus de tuiles /
background-color: var(--bg-dark);
display: flex; / Conserver flex pour centrer si contenu petit /
justify-content: center;
align-items: center;
min-height: 300px; / Ajustez si besoin /
overflow: auto; / Garder le scroll si la carte est grande /
margin-bottom: 10px;
}
/ Styles pour les diff√©rentes vues /
#map-display, #combat-display, #inventory-display, #skills-display {
width: 100%;
height: 100%;
color: var(--text-light);
}
/ Affichage Carte Sp√©cifique /
#map-display {
font-family: 'Courier New', Courier, monospace; / Garder pour white-space: pre /
font-size: 0; / Texte non visible, juste pour structure /
line-height: 0; / Crucial pour coller les tuiles /
white-space: pre; / Conserve la structure de la grille /
background-color: var(--bg-dark); / Fond g√©n√©ral de la carte /
text-align: left; / Assure l'alignement grille /
overflow: hidden; / Cache tout d√©passement /
align-self: flex-start; / Aligne la carte en haut √† gauche si elle est plus petite que #main-view */
}

/* Autres Vues /
#combat-display, #inventory-display, #skills-display {
white-space: normal;
font-family: Georgia, serif;
font-size: 16px; / Retour √† la taille normale */
line-height: 1.5;
}
.hidden { display: none !important; }

/* --- Panneau Stats Joueur (Sidebar) --- /
#player-stats {
flex-shrink: 0;
width: 240px;
border: 1px solid var(--border-color);
padding: 15px;
background-color: var(--bg-dark);
}
#player-stats p {
margin: 8px 0;
font-size: 14px;
display: flex;
align-items: center;
}
#player-stats p > span:first-child {
margin-right: 8px;
font-size: 1.2em;
display: inline-block;
width: 20px;
text-align: center;
}
/ Tooltip styles (using title attribute for now, but could be enhanced) */
#player-stats p span[title] {
cursor: help;
}
.stat-bar-container {
background-color: var(--floor-color);
border: 1px solid var(--border-color);
height: 12px;
border-radius: 3px;
margin-top: 4px;
overflow: hidden;
}
.stat-bar {
height: 100%;
border-radius: 2px;
transition: width 0.3s ease-in-out;
text-align: center;
font-size: 9px;
line-height: 12px;
color: rgba(0,0,0,0.7);
font-weight: bold;
}
.hp-bar { background-color: var(--hp-color); }
.mp-bar { background-color: var(--mp-color); }
.xp-bar { background-color: var(--xp-color); }
.flash-damage {
animation: flashRed 0.4s ease-out;
}
@keyframes flashRed {
0%, 100% { box-shadow: none; }
50% { box-shadow: 0 0 10px 3px red; }
}

/* --- Journal des Messages --- /
#message-log {
height: 120px;
border: 1px solid var(--border-color);
padding: 10px;
overflow-y: scroll;
background-color: var(--bg-dark);
font-size: 13px;
color: var(--text-medium);
}
#message-log h3 { margin-bottom: 5px; }
#message-log p { margin: 0 0 5px 0; padding: 0; }
/ Style for rarity colors in log messages /
#message-log p span[style="color"] {
font-weight: bold;
text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

/* --- Styles des Tuiles de Jeu (CSS Design) --- /
.tile {
display: inline-block;
width: 24px;  / Taille de la tuile /
height: 24px;
vertical-align: top; / Alignement grille /
box-sizing: border-box; / Inclut bordure/padding dans la taille /
position: relative; / Pour pseudo-√©l√©ments /
overflow: hidden; / Cache ce qui d√©passe /
margin: 0;
font-size: 14px; / Pour les emojis si utilis√©s /
text-align: center;
line-height: 24px; / Centrage vertical emojis */
}

/* Sol */
.tile-floor {
background-color: #4a4a4a;
box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
border-top: 1px solid #555;
border-left: 1px solid #555;
}

/* Mur */
.tile-wall {
background: linear-gradient(135deg, var(--wall-color), #614136);
border: 1px solid #4d342a;
box-shadow: inset 1px 1px 3px rgba(0,0,0,0.5);
}
.tile-wall::before {
content: ''; position: absolute; top: 50%; left: 0; right: 0;
height: 1px; background-color: rgba(0, 0, 0, 0.2); transform: translateY(-50%);
}
.tile-wall::after {
content: ''; position: absolute; left: 50%; top: 0; bottom: 0;
width: 1px; background-color: rgba(0, 0, 0, 0.2); transform: translateX(-50%);
}

/* Joueur */
.tile-player {
background: radial-gradient(ellipse at center, #81c784 20%, var(--player-color) 80%);
border-radius: 50%;
border: 1px solid #388e3c;
box-shadow: 0 0 6px 1px rgba(129, 199, 132, 0.8);
z-index: 10;
transform: scale(0.9);
}
.tile-player::before {
content: ''; position: absolute; width: 6px; height: 6px;
background: #388e3c; border-radius: 50%; top: 4px; left: 50%;
transform: translateX(-50%);
}

/* Ennemis - Base /
.tile-enemy {
border-radius: 3px;
z-index: 9;
border: 1px solid rgba(0,0,0,0.6);
box-shadow: inset 0 0 4px rgba(0,0,0,0.4);
transform: scale(0.85);
}
/ Yeux Communs */
.tile-enemy::before, .tile-enemy::after {
content: ''; position: absolute; width: 4px; height: 4px;
background-color: white; border-radius: 50%; top: 6px;
}
.tile-enemy::before { left: 5px; }
.tile-enemy::after { right: 5px; }

/* Gobelin (Rouge) */
.tile-enemy-g { background: radial-gradient(ellipse at top, #ff8a80 10%, var(--enemy-color-base) 80%); }
.tile-enemy-g::before, .tile-enemy-g::after { background-color: yellow; }

/* Squelette (Orange/Jaune) */
.tile-enemy-s { background: radial-gradient(ellipse at top, #ffd54f 10%, var(--enemy-color-alt1) 80%); border-radius: 1px; }
.tile-enemy-s::before, .tile-enemy-s::after { background-color: black; box-shadow: 0 0 1px #ffd54f; }

/* Orc (Rose/Violet) */
.tile-enemy-o { background: radial-gradient(ellipse at top, #f48fb1 10%, var(--enemy-color-alt2) 80%); border-radius: 0; }
.tile-enemy-o::before, .tile-enemy-o::after { background-color: #ffeb3b; width: 5px; height: 3px; top: 7px; border-radius: 1px; }

/* Boss (Violet Fonc√©) /
.tile-enemy-b { background: radial-gradient(ellipse at center, #ba68c8 20%, #8e24aa 80%); border-radius: 50%; box-shadow: 0 0 8px 2px #e040fb; border-color: #6a1b9a; transform: scale(0.95); }
.tile-enemy-b::before, .tile-enemy-b::after { background-color: red; width: 5px; height: 5px; top: 8px; box-shadow: 0 0 2px red; }
.tile-enemy-b::before { left: 6px; transform: rotate(10deg) translateX(-50%); } / Ajustement positionnement /
.tile-enemy-b::after { right: 6px; transform: rotate(-10deg) translateX(50%); } / Ajustement positionnement */

/* Objets - Base /
.tile-item {
background-color: rgba(0,0,0, 0.2);
border-radius: 3px;
z-index: 5;
border: 1px dashed rgba(255,255,255,0.1);
}
/ Emoji Conteneur /
.tile-item::before {
content: ''; / Par d√©faut, sera surcharg√© /
display: block;
position: absolute; / Pour centrer plus facilement */
top: 0; left: 0; right: 0; bottom: 0;
font-size: 16px;
line-height: 24px;
text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
filter: brightness(1.1);
}

.tile-gold::before { content: 'üí∞'; color: var(--gold-color); }
.tile-potion::before { content: 'üß™'; color: var(--potion-color); }

/* Sortie /
.tile-exit {
background-color: #3a2e27;
border: 2px outset #777;
z-index: 5;
}
.tile-exit::before { / Panneau /
content: ''; position: absolute; top: 3px; bottom: 3px; left: 3px; right: 3px;
background-color: var(--exit-color); border: 1px solid #1565c0; border-radius: 1px;
box-shadow: inset 0 0 4px rgba(0,0,0,0.4);
}
.tile-exit::after { / Poign√©e */
content: ''; position: absolute; width: 4px; height: 4px; background-color: #ccc;
border-radius: 50%; top: 50%; right: 5px; transform: translateY(-50%); border: 1px solid #555;
}

/* Coffre /
.tile-chest {
background-color: #a1887f; / Couleur bois /
border: 2px outset #795548; / Bordure bois fonc√©e en relief /
box-shadow: inset 1px 1px 3px rgba(0,0,0,0.4);
border-radius: 2px;
z-index: 6; / Au-dessus du sol/items, sous ennemis/joueur /
}
/ Serrure dor√©e (simple) */
.tile-chest::before {
content: '';
position: absolute;
width: 6px;
height: 4px;
background-color: var(--gold-color);
border: 1px solid #b79000;
border-radius: 1px;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
box-shadow: 0 0 2px rgba(0,0,0,0.5);
}

/* √âl√©ments Hub - Base /
.tile-hub {
background-color: #333;
border: 1px solid #666;
box-shadow: inset 0 0 5px rgba(0,0,0,0.3);
z-index: 5;
}
/ Emoji Conteneur Hub /
.tile-hub::before {
content: ''; / Par d√©faut, sera surcharg√© */
display: block;
position: absolute;
top: 0; left: 0; right: 0; bottom: 0;
font-size: 16px;
line-height: 24px;
text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
filter: brightness(1.2);
}

.tile-hub-inn::before { content: 'üõå'; color: var(--mp-color); }
.tile-hub-dungeon { /* Pas de content ici, couleur suffit */ color: var(--accent-color); }
.tile-hub-dungeon.dungeon-1::before { content: '‚ë†'; }
.tile-hub-dungeon.dungeon-2::before { content: '‚ë°'; }

/* --- Contr√¥les & Boutons --- */
#controls { text-align: center; margin-top: 10px; }
#controls button, .action-button, .shop-button, .skill-button, .inventory-button, .modal-button {
background-color: var(--bg-light); color: var(--text-light);
border: 1px solid var(--border-color); padding: 8px 15px; margin: 5px;
cursor: pointer; font-family: inherit; font-size: 14px; border-radius: 4px;
transition: background-color 0.2s ease, transform 0.1s ease, opacity 0.2s ease;
}
#controls button:hover, .action-button:hover, .shop-button:hover, .skill-button:hover, .inventory-button:hover, .modal-button:hover {
background-color: var(--accent-color); color: var(--text-dark);
}
#controls button:active, .action-button:active, .shop-button:active, .skill-button:active, .inventory-button:active, .modal-button:active {
transform: translateY(1px);
}
#controls button:disabled, .shop-button:disabled, .modal-button:disabled, .inventory-button:disabled {
opacity: 0.5; cursor: not-allowed; background-color: var(--bg-light); color: var(--text-medium);
}
#controls button:disabled:hover, .shop-button:disabled:hover, .modal-button:disabled:hover, .inventory-button:disabled:hover {
background-color: var(--bg-light); color: var(--text-medium);
}
#location-info {
display: block; margin-top: 10px; font-size: 13px;
color: var(--text-medium); text-align: center;
}

/* --- √âcran de Combat --- */
#combat-display { display: flex; flex-direction: column; align-items: center; padding: 20px; }
.combat-participants { display: flex; justify-content: space-around; width: 100%; margin-bottom: 20px; }
.combatant-info { border: 1px dashed var(--border-color); padding: 15px; min-width: 180px; text-align: center; background-color: rgba(0,0,0,0.2); border-radius: 5px; }
.combat-actions button { margin: 8px; }
#combat-skill-selection, #combat-item-selection { margin-top: 15px; padding: 10px; border: 1px dotted var(--border-color); background-color: rgba(0,0,0,0.1); border-radius: 4px; }
#combat-skill-selection h4, #combat-item-selection h4 { margin-top: 0; }

/* --- Listes (Inventaire, Comp√©tences, etc.) --- /
.list-item {
margin-bottom: 10px;
padding-bottom: 8px;
border-bottom: 1px dotted var(--border-color);
display: flex;
justify-content: space-between;
align-items: center;
gap: 10px; / Espace entre les √©l√©ments /
}
.list-item:last-child { border-bottom: none; }
.list-item span { margin-right: 5px; / R√©duit pour laisser de la place / flex-shrink: 1; } / Permet au texte de passer √† la ligne si n√©cessaire /
.list-item strong { color: var(--accent-color); }
.list-item em { color: var(--text-medium); font-style: normal; font-size: 0.9em; }
.list-item button {
margin-left: auto; / Pousse les boutons √† droite /
flex-shrink: 0; / Emp√™che les boutons de r√©tr√©cir /
padding: 4px 8px; / Boutons un peu plus petits dans les listes */
font-size: 12px;
}

/* Styles sp√©cifiques pour les accessoires dans l'inventaire /
.accessory-item {
align-items: flex-start; / Aligne le haut des √©l√©ments /
}
.accessory-name {
font-weight: bold;
flex-grow: 1; / Prend plus de place /
}
.accessory-stats {
color: var(--text-medium);
font-size: 0.85em;
text-align: right;
flex-basis: 100px; / Donne une base de taille aux stats /
flex-shrink: 0;
}
.equip-button {
/ Styles sp√©cifiques au bouton √©quiper si besoin */
}

/* --- Boutique Modale --- */
#modal-backdrop {
position: fixed; top: 0; left: 0; width: 100%; height: 100%;
background-color: var(--modal-backdrop); z-index: 998; display: none;
}
#shop-modal {
position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
width: 90%; max-width: 650px; max-height: 85vh;
background-color: var(--bg-medium); border: 2px solid var(--border-color);
border-radius: 8px; box-shadow: 0 5px 20px rgba(0,0,0,0.6);
z-index: 999; display: none; flex-direction: column;
}
#shop-content { padding: 20px; overflow-y: auto; flex-grow: 1; }
#shop-modal h2 {
margin: 0; padding: 15px 20px; background-color: var(--bg-dark);
border-bottom: 1px solid var(--border-color); border-radius: 8px 8px 0 0;
font-size: 1.5em;
}
.shop-category h3 {
margin-top: 20px; margin-bottom: 10px; color: var(--accent-color);
border-bottom: 1px solid var(--border-color); padding-bottom: 5px;
}
.shop-item {
display: flex; align-items: center; justify-content: space-between;
padding: 10px 5px; border-bottom: 1px dotted var(--border-color);
transition: background-color 0.2s ease;
}
.shop-item:last-child { border-bottom: none; }
.shop-item:hover { background-color: var(--bg-light); }
.shop-item-info { flex-grow: 1; margin: 0 10px; }
.shop-item-name { font-weight: bold; color: var(--text-light); }
.shop-item-effect { font-size: 0.9em; color: var(--text-medium); margin-left: 5px; }
.shop-item-cost { color: var(--gold-color); font-weight: bold; margin: 0 10px; }
.shop-item-icon { font-size: 1.3em; width: 30px; text-align: center; }
#shop-player-gold {
text-align: right; padding: 0 20px 10px; color: var(--gold-color);
font-weight: bold;
}
#shop-modal-controls {
padding: 10px 20px; text-align: right; background-color: var(--bg-dark);
border-top: 1px solid var(--border-color); border-radius: 0 0 8px 8px;
}

/* Game Over Overlay /
#game-over-screen {
position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
background-color: rgba(100, 0, 0, 0.85); color: #ffdddd;
padding: 30px 40px; border: 3px solid #f00; border-radius: 10px;
text-align: center; z-index: 1000;
box-shadow: 0 0 20px rgba(255, 0, 0, 0.7);
/ display: none; /* G√©r√© via JS et la classe .hidden */
}
#game-over-screen.hidden { display: none; }
#game-over-screen h2 { margin-top: 0; color: #f00; font-size: 2em; }
#game-over-screen button {
background-color: #ccc; color: #333; padding: 10px 20px; font-size: 1em;
cursor: pointer; border: none; border-radius: 4px; margin-top: 15px;
}
#game-over-screen button:hover { background-color: #eee; color: #000; }
